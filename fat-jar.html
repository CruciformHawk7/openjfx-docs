<h2>Creating a Fat Jar</h2>

    
<p>
    You can create a runnable fat jar for your JavaFX 11 project over the
    <a href="#command-line">command line</a>, <a href="#Maven">Maven</a> or 
    <a href="#Gradle">Gradle</a>.
</p>

<p>
    In order to create a runnable jar with all the required JavaFX dependencies, 
    you need to use a launcher class that doesn't extend from <kbd>Application</kbd>, 
    like the <a href="hellofx/src/main/java/hellofx/Launcher.java">Launcher</a> class, that 
    calls to the <a href="hellofx/src/main/java/hellofx/HelloFX.java">HelloFX</a> class.
</p>

<p>
    Download the project from <a href="hellofx.zip">here</a>.
</p>

<a name="command-line"></a><h3>Command Line</h3>

<p>
    If you want to create a runnable fat jar with your JavaFX 11 project over the
    command line, then follow these instructions.
</p>

<p>   
    Note that this is a tedious manual process that should be avoided by using the 
    <a href="#Maven">Maven</a>'s shade plugin or the <a href="#Gradle">Gradle</a>'s jar task.
</p>

<p>
    Download the appropriate
    <a target="_blank" href="https://gluonhq.com/products/javafx/">JavaFX SDK</a>
    for your operating system and unzip it to a desired location.
</p>

<p>
    Add an environment variable pointing to the lib directory of the runtime:
</p>

<pre><code>
export PATH_TO_FX=/path/to/javafx-sdk-11/lib
</code></pre>

<p>
    Compile the project:
</p>

<pre><code>
javac --module-path $PATH_TO_FX --add-modules=javafx.controls -d out $(find src/main/java -name "*.java")
</code></pre>

<p>
    And create the fat jar, adding the JavaFX required jars and the platform-specific native libraries:
</p>

<pre><code>
find $PATH_TO_FX/{javafx.base.jar,javafx.graphics.jar,javafx.controls.jar} -name "*.jar" -exec tar xfk {} -C out \;
cp $PATH_TO_FX/{libprism*.dylib,libjavafx*.dylib,libglass.dylib,libdecora_sse.dylib} out
rm out/META-INF/MANIFEST.MF out/module-info.class
mkdir libs
jar --create --file=libs/hellofx.jar --main-class=hellofx.Launcher -C out .
</code></pre>

<p>
    And after the jar is built, you can run it:
</p>

<pre><code>
java -jar libs/hellofx.jar
</code></pre>

<p>
    Note that this jar is platform-specific. However it can be easily a multiplatform jar if the
    different native libraries from each platform were included. This requires downloading the SDK for the 
    three platforms, and copying all the necessary native libraries into the module.
</p>

<a name="Maven"></a><h3>Maven</h3>
<p>
    If your want to create a runnable fat jar with your JavaFX 11 project with 
    the Maven shade plugin, then follow these instructions.
</p>

<p>
    If develop your JavaFX applications using Maven, you don't have to download
    the JavaFX SDK. Just specify the modules and the versions you want in the <kbd>pom.xml</kbd> file,
    and the build system will download the required modules, 
    including the native libraries for your platform.
</p>
<p>
    Here is a <a href="hellofx/pom.xml">pom.xml</a> file which shows how to achieve this.
</p>

<p>
    Run the plugin and create the fat jar:
</p>

<pre><code>
mvn compile package
</code></pre>

<p>
    Run the application using:
</p>

<pre><code>
java -jar shade/hellofx.jar
</code></pre>

<h4>Cross-platfrom jar</h4>

<p>
    You can create a cross-platform fat jar by adding the dependencies from the 
    three platforms that require native libraries to your pom file:
</p>

<textarea rows="22" cols="80" style="border:none;">

    <dependencies>
        ...
        <dependency>
            <groupId>org.openjfx</groupId>
            <artifactId>javafx-graphics</artifactId>
            <version>11</version>
            <classifier>win</classifier>
        </dependency>
        <dependency>
            <groupId>org.openjfx</groupId>
            <artifactId>javafx-graphics</artifactId>
            <version>11</version>
            <classifier>linux</classifier>
        </dependency>
        <dependency>
            <groupId>org.openjfx</groupId>
            <artifactId>javafx-graphics</artifactId>
            <version>11</version>
            <classifier>mac</classifier>
        </dependency>
    </dependencies>

</textarea>

<a id="Gradle"></a><h3>Gradle</h3>
<p>
    If your want to create a runnable fat jar with your JavaFX 11 project with 
    the Gradle, then follow these instructions.
</p>

<p>
    If develop your JavaFX applications using Gradle, you don't have to download
    the JavaFX SDK. Just specify the modules and the versions you want in the <kbd>build.gradle</kbd> file,
    and the build system will download the required modules, 
    including the native libraries for your platform. However, for Gradle we need to 
    find and specify the platform/OS as classifier.
</p>

<p>
    Modify the <kbd>jar</kbd> task in your <a href="hellofx/build.gradle">build</a> 
    file to include the launcher class:
</p>

<pre><code>
mainClassName = 'hellofx.Launcher'
jar {
    manifest {
        attributes 'Main-Class': 'hellofx.Launcher'
    }
    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
}
</code></pre>

<p>
    Now run the task to create the fat jar and run it:
</p>

<pre><code>
./gradlew jar

java -jar build/libs/hellofx.jar
</code></pre>    

<h4>Cross-platfrom jar</h4>

<p>
    You can create a cross-platform fat jar by adding the dependencies from the 
    three platforms that require native libraries to your pom file:
</p>

<pre><code>
compile "org.openjfx:javafx-graphics:11:win"
compile "org.openjfx:javafx-graphics:11:linux"
compile "org.openjfx:javafx-graphics:11:mac"
</code></pre>  